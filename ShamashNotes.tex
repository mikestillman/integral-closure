\documentclass[11pt]{amsart}
\usepackage{geometry}                % See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   % ... or a4paper or a5paper or ... 
%\geometry{landscape}                % Activate for for rotated page geometry
%\usepackage[parfill]{parskip}    % Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{epstopdf}
\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}
\def\g{{\gamma}}
\def\mm{{\frak m}}
\def\w{{\rm weight}}

\title{Shamash Complex induction}
\author{DE+MES}
%\date{}                                           % Activate to display a given date or no date

\begin{document}
\maketitle
Tired of redoing the computation, I decided to TeX it:

\section{Conventions:} $B\subset Z$ and  $H$ for boundaries, cycles, homology of the Koszul complex $K$ of a  ring $R,\mm$ (local). $T$ for a basis element of the homology; $E$ for the free $R$-module $R^T$; 
$(a,b...)$ represents $K_a\otimes E_b\otimes \cdots$. Elements such as $k\otimes x_1\cdots$ are written without the $\otimes$.
Here $0\leq a\leq numgens\ R$; and $2\leq b,c\dots\leq 1+pd(R)$, where $pd(R)$ = the highest degree of the Koszul homology. The homological degree of $(a,b\dots$ is the sum; the weight is the
number of factors that are $>0$.

Note that $KK \subset K$; and $ZZ\subset H+B = Z$. Also $ZB\subset B$.

\section{Formulas, start of induction}
$d,\g$ are to be defined inductively on the weight (and degree??) using formulas:

\begin{enumerate}
\item \label{(1)} $d:K\to K$ is the Koszul differential; $d: E \to K$ is the projection to $E/\mm E \cong H$.
\item \label{(2)}
$$
d(ku_1\cdots) = (dk)u_1\cdots +(-1)^kd(1u_1\cdots).
$$
\item\label{(3)}
on $(0,b,c\dots)$, 
$$
d(x_1x_2\cdots x_n) = d(x_1\cdots x_{n-1})x_n+\g(x_1,\dots, x_n)
$$
with weight $\g(x_1,\dots, x_n)<n$. As Shamash notes in Remark 1,  this implies
$$
d(x_1x_2\cdots x_n) = T_{1}x_{2}\cdots x_n+\g(z),
$$
with $\w\;\g(z)<n$, by induction and multi-linearity (so Shamash  supposes that $\g(x_{1}, \dots, x_{n})$ can be written $\g(x_{1}\cdots x_{n})$.) This is used in Shamash's induction.

\item\label{(4)} In Remark 2, $\g$ is ``defined'' on K-basic elements by 
$$
\g(kx_{2}\cdots x_{n}) = (-1)^{k}k\g(x_{2}\cdots x_{n}).
$$
For $n=1$ this gives $\g(k) = \pm k$ which violates $\w\; \g(k)<k$; the only possibility is that $\g(k)$ is
a scalar (or 0). We will see that this makes trouble already in weight 2, and generally in the inductive step.
However, it seems ok if we start the $\gamma$ induction with weight 2.
\end{enumerate}

\section{weight 2} 
For $kx\in KE$ 
$$
d(kx) = (dk)x+(-1)^k k(dx) \in BE+K^2.
$$
and thus we may take $\g(kx) = (-1)^{k}kdx$, as in Shamash' Remark 2.

Note that the weight does not decrease unless $k\in K_1$ or $k \in Z$. But also note that the formula
$d(kx) = (dk)x+ \g(kx)$ forces $\g(kx) = (-1)^{k}kT$, whence $\g(x) = T = dx$

For $x_1x_2\in E^2$
$$
d(x_1x_2)= (dx_1)x_2 +\g(x_1,x_2) = T_1x_2+\gamma(x_1x_2)
$$
so 
$$
d\gamma(x_1,x_2) = -d((dx_1)x_2) = -(-1^{T_1})T_1T_2 =-(-1^{T_1})(T_{1,2}+d(z_{1,2})) \in K;
$$
This lifts to $\g(x_1,x_2)=-(-1^{T_1})(x_{1,2}+z_{1,2}) \in E+K$, 
where 
$$
T_1T_2 - T_{1,2} = d(z_{1,2}),
$$
 and we see that $d:E^2\to HE+ E+K$:
 $$
d(x_1x_2)= (dx_1)x_2 +\g(x_1,x_2) = T_1x_2-(-1^{T_1})(x_{1,2}+z_{1,2})
$$


\subsection{Shamash's induction for weight 2}
However, the induction proposed in the ``construction'' on p. 4 starts with 
\begin{align*}
-d\g(x_1x_2) = d((dx_{1})x_{2})  &= \gamma((dx_{1})x_{2}) \hbox{ by item~(\ref{(3)}) }\\
&=\gamma(T_{1}x_{2})\\
&=(-1)^{T_1}T_{1}T_2
\end{align*}
where we define the value of $\g$ on a weight 2 $K$-basic element by the formula at the beginning of Section 3,
NOT by Shamash' formula.
So we can take
$$
\gamma(x_1x_2) = -(-1)^{T_1}(x_{1,2} +z_{1,2})
$$
$$
d(x_1x_2) = T_1x_2 -(-1)^{T_1}(x_{1,2} +z_{1,2})
$$

Thus: the induction can be made to work for weight 2, but not using induction from the weight 1 base case
with Shamash' formula.


\section{weight 3}
For $kx_1x_2\in KE^2$,
$$
d(kx_1x_2) = -[(dk)x_1x_2 + (-1)^k kd(x_1x_2)]
$$
so $d: KE^2 \to BE^2+KHE+KE+K^2 = BE^2+KE+K.$

For $x = x_1x_2x_3\in E^3$,
$$
dx = d(x_1x_2)x_3+\g(x) = T_1x_2x_3+\g(x_1x_2)x_3+\g(x), \hbox{ where $T_1 = dx_1$ }
$$
and $d(T_1x_2x_3) = (-1)^{T_1}T_1d(x_2x_3)$,
so
$$
d\g(x) = -[d(T_1x_2x_3)  + d(\g(x_1x_2)x_3)] = -(-1)^{T_1}T_1d(x_2x_3) - d(\g(x_1x_2)x_3).
$$


Now $d(\g(x_1x_2)x_3)$ is a boundary by definition, and $\g(x_{1}x_{2})x_{3}$ has weight $\leq 2<3$. So
we may take
 $\g(x_1x_2x_3) = - (-1)^{T_{1}}G-\g(x_1x_2)x_3$, for some $G$  of weight $<3$ such that
\begin{align*}
 dG &= T_1d(x_2x_3) \\
 &= T_1T_2x_3+T_1\g(x_2x_3)\\
 &= T_{1,2}x_3+k_{1,2}x_3+ (-1^{1+T_1})T_1(x_{2,3}+z_{2,3})
\end{align*}

{\bf REVISED TO HERE}
Let's check that this is a cycle: {\bf wrong second line -- fix!}
\begin{align*}
d&\bigl[T_{1,2} x_3 +k_{1,2}x_3+(-1^{1+T_1})T_1(x_{2,3}+k_{2,3})\bigr]\\
&=(-1)^{T_{1,2}}T_{1,2}T_3 + d(k_{1,2})x_3 + (-1)^{1+T_{1,2}} dk_{1,2}T_3 -T_1(T_{2,3}+dz_{2,3}).
\end{align*}





Since $d(T_1x_2x_3)$ is a cycle, it would be enough to see that it had weight 1, or that it had weight 2 with
all unit coefficients; then by Lemma 5 there is a $w$ of weight 
$\leq 2$ such that $dw = d(T_1x_2x_3)$ and  $G := w$ has weight $<3$ with
the right property.

We have 
$$
d(T_1x_2x_3) = T_1d(x_2x_3) = T_1T_2x_3+T_1\g(x_{2}x_3) = T_1T_2x_3-T_1(x_{2,3}+k_{2,3})
$$
Which has weight 2 and unit coefficients, so it should lift to something
of weight 2.

Is the RHS actually a cycle? At least up to sign this seems ok:
$$
d(T_1T_2x_3+T_1(x_{2,3}+k_{2,3})) = (-1)^{T_1T_2}T_1T_2T_3 + (-1)^{T_1}T_{1,2,3}.
$$

Since $ T_1(x_{2,3}+k_{2,3})$ already has weight $\leq 2$, it's enough to lift the first term to something of weight 2:
$$
T_1T_2x_{3} =  d(x_{1,2}x_{3}+k_{1,2}x_{3})-\g(x_{1,2}x_{3})\pm k_{1,2}T_{3}.
$$

\subsection{Shamash's induction} Shamash proceeds differently. As above, we must write 
$$
-d\g(x_{1}x_{2}x_{3}) = d(d(x_{1}x_{2})x_{3}) 
$$
as $-d\g(x_{1}x_{2}x_{3})$ with $\w\; \g(x_{1}x_{2}x_{3})\leq 2.$ 
Shamash writes
\begin{align*}
d(d(x_{1}x_{2})x_{3})  &= \gamma(d(x_{1}x_{2})x_{3})\\ 
&\g(T_1x_2x_3) -(-1)^{T_1}\g(x_{1,2}x_3) +\g(z_{1,2}x_3)\\
&(-1)^{T_1}T_1\g(x_2x_3) -(-1)^{T_1}\g(x_{1,2}x_3) +\g(z_{1,2}x_3)\\
&(-1)^{T_1}T_1\g(x_2x_3) -(-1)^{T_1}\g(x_{1,2}x_3) +(-1)^{z_{1,2}}z_{1,2}T_3\\
\end{align*}
Thus 
$$
\g'(x_{1}x_{2}x_{3}) := (-1)^{1+T_{1}}\g(x_{1}\gamma(x_{2}x_{3})+\g(x_{1}x_{2})x_{3})
$$
is a cycle, and by induction (using $\g$ only on things of weight 2) it has weight $\leq 1$.  Lemma 5 says that it can be lifted to an element $\g'(x_{1}x_{2}x_{3})$ of weight at most 2, and then we would take
$$
\g(x_{1}x_{2}x_{3}) = x_{1}\g(x_{2}x_{3}) +\g'(x_{1}x_{2}x_{3}).
$$
To test whether this is right, or really relies on the induction for $\g$ on weight 1, we substitute our formula
$\g(x_1,x_2)=-x_{1,2}-z_{1,2} \in E+K$ for the inner $\g$s:
\begin{align*}
\g'(x_{1}x_{2}x_{3}) &= (-1)^{1+T_{1}} \g(x_{1}\g(x_{2}x_{3})+\g(x_{1}x_{2})x_{3})\\
&= (-1)^{1+T_{1}}\g(x_{1}x_{2,3}+x_{1}k_{2,3}) + \g(x_{1,2}x_{3}+k_{1,2}x_{3})\\
&= (-1)^{1+T_{1}}(x_{1,2,3}+k_{1,(2,3)}\pm T_{1}k_{2,3})
+ x_{(1,2),3}+k_{(1,2),3}\pm T_{3}k_{1,2}
\end{align*}
where we interpret $xk$ as $\pm kx$. This is supposed to be $dz$ for $z$ of weight 2. By exactness in this
degree and weight, it \emph{should} be enough to test that it's really a cycle. Applying $d$,

\begin{align*}
 d\g'(x_{1}x_{2}x_{3}) &= \pm T_{1}T_{2,3}\pm T_{1}dk_{2,3} +T_{1,2}T_{3}\pm T_{3}dk_{1,2}\\
 &= \pm T_{1}T_{2,3}\pm T_{1}(T_{2,3}-T_{2}T_{3}) +T_{1,2}T_{3}\pm T_{3}(T_{1,2}-T_{1}T_{2})
\end{align*}
which is indeed 0 up to signs.


\end{document}  